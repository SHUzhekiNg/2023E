# 评价模型，为了得到一个城市夜间照明指数从而反映光污染

### 我们使用了熵权法来为各因素进行客观的权重赋值。熵值法是一种客观赋权方法，借鉴了**信息熵**思想，它通过计算指标的信息熵，根据指标的相对变化程度对系统整体的影响来决定指标的权重。

即根据各个指标标志值的差异程度来进行赋权，从而得出各个指标相应的权重，相对变化程度大的指标具有较大的权重

熵越大说明系统越混乱，携带的信息越少，权重越小；熵越小说明系统越有序，携带的信息越多，权重越大

We use the entropy weight method (EWM) to get the weight of indicators.

The entropy method is an objective weighting method, which uses the information entropy idea for reference. It determines the weight of the index by calculating the information entropy of the index and according to the impact of the relative change of the index on the overall system,
That is, the weight of each indicator is given according to the difference degree of the indicator value, and the corresponding weight of each indicator is obtained. The indicator with relatively large change degree has larger weight
The greater the entropy, the more chaotic the system is, the less information it carries and the less weight it has; The higher the entropy, the more orderly the system is, the more information it carries, and the greater the weight

​		我们选定了9个城市作为评价对象，光污染的直接反映是夜间光照水平，我们选取了8个间接指标作为评价指标变量，用来对城市的夜间光照水平进行评价，第i个评价城市关于第j个指标变量的取值为$a_{ij}$，构造数据矩阵$A=(a_{ij})_{9×9}$。

​		我们选定的8个指标分别是人口密度、夜间用电量、人均GDP、地区产业结构、地区平均工作时长、交通晚上截止时间、夜生活指数、极限星等，其中只有极限星等是客观指标，无法做出改变。

​		我们对指标选取进行解释。指标分为两类，一类是效益型属性，数据指标越大夜间光照水平越高，一类是成本型属性，数据指标越小夜间光照水平越高。

1. 人口密度：一个地区随着人口密度增大，其公共空间的照明需求也随之增大，从而增加了夜间光照水平，因此为效益型数据。

2. 夜间用电量：夜间用电量很大一部分用于照明，因此其在一定程度上也能反映夜间光照水平，属于效益型数据。

3. 人均GDP：人均GDP反映了当地发达程度，地区越发达以及繁荣，繁荣地区商场以及高楼建筑也就越多，商场中的LED灯以及高楼的玻璃幕墙都会导致夜间光照水平增多，属于效益型数据。

4. 地区产业结构：各个产业对照明的需求是不同的，第一产业对光照无太多需求，第二产业中的部分产业对光照有要求，而第三产业服务业则极度依赖灯光来吸引顾客，因此产业结构也会对当地夜间光照水平有影响，因此我们认为第三产业占比越多夜间光照水平越高，属于效益型数据。

5. 地区平均工作时长：人们下班时间越早则晚上通勤结束时间越早，从而远光灯需求会变少，夜间照明时间需求变少，因此会影响夜间光照水平，所以工作时长越长，下班越晚，属于成本型数据。

6. 公交末班车时间：公共交通的运行保证条件是照明，因此交通运行时间之内照明自然也就增多，末班车的时间越晚，夜间光照水平也就提高，属于效益型数据。

7. 夜生活指数：夜生活即在晚上过着与白天相同的生活，因此照明需求增大，一个地区的夜生活指数越高，夜间光照水平也就越高，属于效益型数据。

8. 极限星等：即指望远镜所能看到最暗的星等，能看到的极限星等越高，意味着地面上亮度越低也即夜间光照水平低，因此属于成本型数据。

9. 降水量：雨天越多降水量就越多，也意味着云层越厚，从而增加了光的反射率，因此属于效益型数据。

   ### 接下来，我们介绍熵权法步骤

   利用数据矩阵A计算第i个评价对象关于第j个指标值的比重：$p_{ij}=\frac{a_{ij}}{\sum_{i=1}^na_{ij}},i=1,2\cdots,9,j=1,2,\cdots,9$

   The first step is the standardization of measured values. The standardized value of the jth index in the ith sample is denoted as $p_{ij}$, and its calculation method is as follow:

$p_{ij}=\frac{a_{ij}}{\sum_{i=1}^na_{ij}},i=1,2\cdots,,9,j=1,2,\cdots,9$

​		计算第j项指标的熵值：$e_j=-\frac{1}{lnn}\sum_{i=1}^np_{ij}lnp_{ij},j=1,2,\cdots,9$，随机变量的熵值越大表示它的值能给你补充的信息越多，而反过来熵值越小意味着已知的信息就越少

In the EWM, the entropy value $e_i$ of the jth index is defined as:$e_j=-\frac{1}{lnn}\sum_{i=1}^np_{ij}lnp_{ij},j=1,2,\cdots,9$

The range of entropy value $e_j$ is [0, 1]. The larger the $e_j$ is, the greater the differentiation degree of index j is, and more information can be derived. Hence, higher weight should be given to the index. 

​		传统熵权法计算第j项指标的权重为:$w_j=\frac{1-e_j}{\sum_{j=1}^me_j},j=1,2,\cdots,9$，从而构建了权向量W。

Therefore, in the traditional EWM, the calculation method of weight is :$w_j=\frac{1-e_j}{\sum_{j=1}^me_j},j=1,2,\cdots,9$

It can be seen from the above equation that when $e_j\rightarrow1$,the difference in the entropy value of different evaluation indexes is small, but the difference in the entropy weight is large. Therefore, we use the following equation to calculate entropy weight instead of traditional equation.

​		$w_j^{'}=\frac{1+e_j+\sum_{k=1}^ne_k}{\sum_{l=1}^n(1-2e_l+\sum_{k=1}^ne_k)}$

In the above method, the different entropy weights for different indicators (e.g. *p* and *q*)become $\Delta w=2\Delta e/C$, where $\Delta e=e_p-e_q,C=\sum_{l=1}^n(1-2e_l+\sum_{k=1}^ne_k)$. It indicates that the entropy value changes slightly, and its corresponding entropy weight also changes slightly. For the factor with equivalent useful information, the weight information is consistent with the corresponding entropy level.

​		通过上述步骤，我们得到了各项指标的权重。

### 接着我们使用TOPSIS法来进行语言影响强度评分，其结果可以精确地反映各评价方案之间的差距。

Then we use TOPSIS method to score the language impact intensity, and the advantage is that it can accurately reflect the gap between the evaluation schemes.

​		对数据进行标准0-1变换处理。对于效益型(数据越大越好)，$b_{ij}=\frac{a_{ij}-a_j^{min}}{a_j^{max}-a_j^{min}}$，而对于成本型，则$b_{ij}=\frac{a_{j}^{max}-a_{ij}}{a_j^{max}-a_j^{min}}$,从而构成了处理过后的决策矩阵B。

​		Since the selected indicators are benefit-based data, which means the bigger the data, the better, so we use Min-Max normalization to process the data. For benefit-based data,$b_{ij}=\frac{a_{ij}-a_j^{min}}{a_j^{max}-a_j^{min}}$ ,and for cost-based data,$b_{ij}=\frac{a_{j}^{max}-a_{ij}}{a_j^{max}-a_j^{min}}$. All these data form the normalized matrix, and it is called B.

​		接着我们计算加权后的向量规范化属性矩阵$C=W*B$。

​		We then multiply each value in a column with the corresponding weight given.

​		接着我们分别构造正理想解$C^*$和负理想解$C_0$，其中$C^*=[b_1^{max},b_2^{max},\cdots,b_8^{max}]$，$C_0=[b_1^{min},b_2^{min},\cdots,b_8^{min}]$

​		Calculating Ideal Best and Ideal worst.

​		Now we need to calculate Euclidean distance for elements in all rows from the ideal best and ideal worst, Here $s_i^*$ is the best distance calculated on an *ith* row, where $b_{ij}$ is element value and $C_i^{*}$ is the ideal best for that column. similarly, we can find $s_i^0$, worst distance calculated on an *ith* row.

​		距离公式$s_i^{0}=\sqrt{\sum_{i=1}^{3}(b_{ij}-C_i^{*})^{2}},j=1,2\cdots,9$

​		==画一张表格==

​		接下来，我们分别计算$C_i,i=1,2,\cdots,9$到正理想解$C^*$的距离$s_i^*$与到负理想解$C_0$的距离$s_i^0$，从而计算出该城市的夜间光照水平$f_i=\frac{s_i^0}{s_i^*+s_i^0}$

​		Calculating Topsis Score and Ranking. Now we have distance positive and distance negative with us, let’s calculate the Topsis score for each row based on them.

​		$f_i=\frac{s_i^0}{s_i^*+s_i^0}$

